#!/bin/bash

function getCurrentAppMac {
  osascript << EOF
    tell application "System Events"
      if exists process "ScreenSaverEngine"
        return "screensaver"
      end if
      return name of first application process whose frontmost is true
    end tell
EOF
}

function getCurrentApp() {
  if [[ $OSTYPE == darwin* ]]; then
    getCurrentAppMac
  else
    echo Unsupported OS: $OSTYPE
  fi
}

app=$(getCurrentApp)

if [ "$app" == "screensaver" ]; then
  exit 0
fi

date=$(date +"%Y-%m-%d %H:%M:%S")

echo "$app"
echo "$date $app" >> ~/Dropbox/System/hours.log
